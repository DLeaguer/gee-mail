<html>
    <head>
        <script src="js/mail-generator.js"></script>
        <link rel="shortcut icon" type="image/png" href="images/favicon.png"/>
        <link href="css/style.css" rel="stylesheet" media="screen">
        <link href="https://fonts.googleapis.com/css?family=Bungee+Shade|Exo+2|Titillium+Web" rel="stylesheet">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser



        //header title with background
        var getMain = document.getElementById('main');

        var headerh1 = document.createElement('h1');
        headerh1.className = 'header';
        main.appendChild(headerh1);

        var imgBack = document.createElement('h2');
        imgBack.className = 'imgBack';
        imgBack.innerHTML = 'Gee';
        headerh1.appendChild(imgBack);
        
        var imgBack2 = document.createElement('h2');
        imgBack2.className = 'imgBack';
        imgBack2.innerHTML = 'Mail';
        imgBack.appendChild(imgBack2);



        //counter 
        var delay = 5000;

        var count = 0;

        var countDiv = document.createElement('div');
        countDiv.className = 'count';
        countDiv.innerHTML = 'Inbox:  ';
        main.appendChild(countDiv);

        var counted = document.createElement('div');
        counted.className = 'count';
        main.appendChild(counted);



        //counter setInterval (see counter for delay)
        var vari;
        function counting(){
            vari = setInterval(countMess, delay);
        }
        counting();

        function countMess(){
            count++;
            counted.innerHTML = sender.length + count;
        }
        countMess();



        //original 10 gee mails
        for (var i=0; i<sender.length; i++){

            var mainDiv = document.createElement('div');
            mainDiv.className = 'main';
            main.appendChild(mainDiv);

            var dateDiv = document.createElement('div');
            dateDiv.className = 'date';
            dateDiv.innerHTML = 'Date: ' + getRandomDate();
            mainDiv.appendChild(dateDiv);

            var senderDiv = document.createElement('div');
            senderDiv.className = 'sender';
            senderDiv.innerHTML = 'Sender: ' + sender[i];
            mainDiv.appendChild(senderDiv);

            var subjectDiv = document.createElement('div');
            subjectDiv.className = 'subject';
            subjectDiv.innerHTML = 'Subject: ' + subject[i];
            mainDiv.appendChild(subjectDiv);

            var messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            messageDiv.innerHTML = 'Message:';
            mainDiv.appendChild(messageDiv);

            var bodyDiv = document.createElement('div');
            bodyDiv.className = 'body';
            bodyDiv.innerHTML = body[i];
            messageDiv.appendChild(bodyDiv);

        }



        //show original 10 body messages
        var messDivGet = document.getElementsByClassName('message');
        for (i=0; i<messDivGet.length; i++){
            messDivGet[i].addEventListener('click', showBody);
        }
        var bodyElem = document.getElementsByClassName('body');
        for (i=0; i<bodyElem.length; i++){
            bodyElem[i].style.display = 'none';
        }

        function showBody(){
            var pElem = this.querySelectorAll('.body')[0];
            // console.log(pElem);
            if (pElem.style.display === 'none'){
                pElem.style.display = 'block';
            }else{
                pElem.style.display = 'none';
            }
        }



        //new gee mails setInterval (see counter for delay)
        var myVar;

        function myStartFunction() {
            myVar = setInterval(alertFunc, delay);
        }
        myStartFunction();
        
        function alertFunc() {
            
            var newMain = document.createElement('div');
            newMain.className = 'newMain';
            newMain.innerHTML = '';
            main.appendChild(newMain);
            
            var newDate = document.createElement('div');
            newDate.className = 'newDate';
            newDate.innerHTML = 'Date: ' + getNewMessage().date;
            newMain.appendChild(newDate);
            
            var newSender = document.createElement('div');
            newSender.className = 'newSender';
            newSender.innerHTML = 'Sender: ' + getNewMessage().sender;
            newMain.appendChild(newSender);
            
            var newSubject = document.createElement('div');
            newSubject.className = 'newSubject';
            newSubject.innerHTML = 'Subject: ' + getNewMessage().subject;
            newMain.appendChild(newSubject);

            var newMessage = document.createElement('div');
            newMessage.className = 'newMessage';
            newMessage.innerHTML = 'Message: ';
            newMain.appendChild(newMessage);

            var newBody = document.createElement('div');
            newBody.className = 'newBody';
            newBody.innerHTML+= getNewMessage().body;
            newMessage.appendChild(newBody);



            //show new body messages inside setInterval
            var newMess = document.getElementsByClassName('newMessage');
            for (i=0; i<newMess.length; i++){
                newMess[i].addEventListener('click', showNewBody);
            }

            function showNewBody(){
                var pElem = this.querySelectorAll('.newBody')[0];
                if (pElem.style.display === 'none'){
                    pElem.style.display = 'block';
                }else{
                    pElem.style.display = 'none';
                }
            }

        }
        alertFunc();



      };
    </script>
    </head>
    <body>
        <div class="container" id="main">
            <!-- Build Me! -->
        </div>
	</body>
</html>